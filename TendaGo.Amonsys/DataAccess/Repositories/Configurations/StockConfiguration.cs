// <auto-generated> This file has been auto generated by EF Core Power Tools. </auto-generated>
using ER.DA.Models;
using ER.DA.Repositories;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using System;
using System.Collections.Generic;

namespace ER.DA.Repositories.Configurations
{
    public partial class StockConfiguration : IEntityTypeConfiguration<Stock>
    {
        public void Configure(EntityTypeBuilder<Stock> entity)
        {
            entity.HasKey(e => e.Id).HasName("PK_Kardex_1");

            entity.ToTable(tb => tb.HasTrigger("TR_Stock_CostoPromedioPonderado"));

            entity.HasIndex(e => new { e.IdEmpresa, e.IdProducto }, "IX_Stock");

            entity.HasIndex(e => new { e.IdProducto, e.IdLocal }, "IX_Stock_01").HasFilter("([CostoPromedioPonderado]<>(0))");

            entity.HasIndex(e => e.CostoPromedioPonderado, "IX_Stock_IDProducto");

            entity.HasIndex(e => new { e.IdProducto, e.IdLocal, e.Fecha }, "IX_Stock_IDProducto2");

            entity.Property(e => e.Id)
                .HasMaxLength(50)
                .IsUnicode(false);
            entity.Property(e => e.Cantidad).HasColumnType("decimal(18, 2)");
            entity.Property(e => e.CantidadTipoUnidad).HasColumnType("decimal(18, 2)");
            entity.Property(e => e.CostoPromedioPonderado).HasColumnType("decimal(18, 4)");
            entity.Property(e => e.Fecha).HasColumnType("datetime");
            entity.Property(e => e.IdDetalle)
                .HasMaxLength(50)
                .IsUnicode(false);
            entity.Property(e => e.IdSalidaEntrada)
                .HasMaxLength(50)
                .IsUnicode(false);
            entity.Property(e => e.SaldoInventario)
                .HasComputedColumnSql("([StockInventario]*[CostoPromedioPonderado])", false)
                .HasColumnType("decimal(37, 6)");
            entity.Property(e => e.StockInventario).HasColumnType("decimal(18, 2)");
            entity.Property(e => e.Tipo)
                .HasMaxLength(1)
                .IsUnicode(false);
            entity.Property(e => e.ValorTotal)
                .HasComputedColumnSql("([Cantidad]*[ValorUnitario])", false)
                .HasColumnType("decimal(37, 6)");
            entity.Property(e => e.ValorUnitario).HasColumnType("decimal(18, 4)");

            entity.HasOne(d => d.IdEmpresaNavigation).WithMany(p => p.Stock)
                .HasForeignKey(d => d.IdEmpresa)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Stock_Empresa");

            entity.HasOne(d => d.IdProductoNavigation).WithMany(p => p.StockNavigation)
                .HasForeignKey(d => d.IdProducto)
                .OnDelete(DeleteBehavior.ClientSetNull)
                .HasConstraintName("FK_Stock_Producto");

            OnConfigurePartial(entity);
        }

        partial void OnConfigurePartial(EntityTypeBuilder<Stock> entity);
    }
}
